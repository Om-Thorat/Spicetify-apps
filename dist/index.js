var vis=(()=>{var e,t,n,r=Object.create,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,o=(t,n,r,a)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let e of i(n))c.call(t,e)||e===r||l(t,e,{get:()=>n[e],enumerable:!(a=u(n,e))||a.enumerable});return t},f=(e,t,n)=>(n=null!=e?r(a(e)):{},o(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)),s=(e={"external-global-plugin:react"(e,t){t.exports=Spicetify.React}},function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports}),d={},m=d,y={default:()=>function(){return P.default.createElement(g,null)}};for(n in y)l(m,n,{get:y[n],enumerable:!0});var p=f(s()),v=f(s());var E=function(){return v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"bar"}))};function g(){return p.default.useEffect(()=>{let l=document.getElementsByClassName("vis_container")[0].children,u=!1;async function e(){var e=await Spicetify.getAudioData(),n=e.segments;for(let t=0;t<n.length-1;t++){var r=Spicetify.Player.getProgressPercent()*e.track.duration;if(r<=n[t+1].start&&n[t].start<=r||(t=function(e,t){let n=0,r=e.length-1;for(;n<=r;){var a=Math.floor((n+r)/2);if(t<=e[a].start+e[a].duration&&e[a].start<=t)return a;e[a].start+e[a].duration<t?n=a+1:r=a-1}return 0}(n,r)),1==u)break;Spicetify.Player.isPlaying()||await function(n,r){return new Promise(e=>{const t=()=>{n.removeEventListener(r,t),e("")};n.addEventListener(r,t)})}(Spicetify.Player,"onplaypause");for(let e=0;e<12;e++){var a=l[e];a.style.transition=`all ${1e3*n[t].duration}ms`,a.style.height=70*n[t].pitches[e]+"%"}await function(t){return new Promise(e=>setTimeout(e,t))}(1e3*n[t].duration)}}Spicetify.Player.addEventListener("songchange",()=>{u=!(u=!0),e()}),Spicetify.Player.addEventListener("songchange",()=>{u=!(u=!0),e()}),e()},[]),p.default.createElement("div",{className:"vis_container"},p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null),p.default.createElement(E,null))}var P=f(s());return f=d,o(l({},"__esModule",{value:!0}),f)})();const render=()=>vis.default();