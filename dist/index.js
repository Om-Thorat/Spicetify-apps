var vis=(()=>{var e,t,a,n=Object.create,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,c=(t,a,n,r)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of i(a))o.call(t,e)||e===n||l(t,e,{get:()=>a[e],enumerable:!(r=u(a,e))||r.enumerable});return t},s=(e,t,a)=>(a=null!=e?n(r(e)):{},c(!t&&e&&e.__esModule?a:l(a,"default",{value:e,enumerable:!0}),e)),f=(e={"external-global-plugin:react"(e,t){t.exports=Spicetify.React}},function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports}),d={},m=d,p={default:()=>function(){return b.default.createElement(E,null)}};for(a in p)l(m,a,{get:p[a],enumerable:!0});var y=s(f()),v=s(f());var g=function(){return v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"bar"}))};function E(){return y.default.useEffect(()=>{let l=document.getElementsByClassName("vis_container")[0].children,u=!1;async function e(){var e=await Spicetify.getAudioData(),a=e.segments;u=!1;for(let t=0;t<a.length-1;t++){var n=Spicetify.Player.getProgressPercent()*e.track.duration;if(n<=a[t+1].start&&a[t].start<=n||(t=function(e,t){let a=0,n=e.length-1;for(;a<=n;){var r=Math.floor((a+n)/2);if(t<=e[r].start+e[r].duration&&e[r].start<=t)return r;e[r].start+e[r].duration<t?a=r+1:n=r-1}return 0}(a,n)),1==u){console.log("LOOK i have stopped");break}Spicetify.Player.isPlaying()||await function(a,n){return new Promise(e=>{const t=()=>{a.removeEventListener(n,t),e("")};a.addEventListener(n,t)})}(Spicetify.Player,"onplaypause");for(let e=0;e<12;e++){var r=l[e];r.style.transition=`all ${1e3*a[t].duration}ms`,r.style.height=60*a[t].pitches[e]+20*(r=a[t].loudness_max,1<(r=Math.pow(10,r/20))?1+r/(1+Math.abs(r))*.5:r-.5)+"%"}await function(t){return new Promise(e=>setTimeout(e,t))}(1e3*a[t].duration)}}Spicetify.Player.addEventListener("songchange",()=>{u=!0,e()}),Spicetify.Player.addEventListener("songchange",()=>{u=!0,e()}),e()},[]),y.default.createElement("div",{className:"vis_container"},y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null),y.default.createElement(g,null))}var b=s(f());return s=d,c(l({},"__esModule",{value:!0}),s)})();const render=()=>vis.default();