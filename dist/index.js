var vis=(()=>{var e,t,n,a=Object.create,r=Object.defineProperty,u=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,l=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,i=(t,n,a,l)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let e of o(n))c.call(t,e)||e===a||r(t,e,{get:()=>n[e],enumerable:!(l=u(n,e))||l.enumerable});return t},s=(e,t,n)=>(n=null!=e?a(l(e)):{},i(!t&&e&&e.__esModule?n:r(n,"default",{value:e,enumerable:!0}),e)),f=(e={"external-global-plugin:react"(e,t){t.exports=Spicetify.React}},function(){return t||(0,e[o(e)[0]])((t={exports:{}}).exports,t),t.exports}),d={},m=d,y={default:()=>function(){return P.default.createElement(E,null)}};for(n in y)r(m,n,{get:y[n],enumerable:!0});var g=s(f()),p=s(f());var v=function(){return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"bar"}))};function E(){return g.default.useEffect(()=>{let u=document.getElementsByClassName("vis_container")[0].children,o=!1;async function e(){var e=await Spicetify.getAudioData(),n=e.segments,a=Spicetify.Queue.track.contextTrack.metadata.title;for(let t=0;t<n.length-1;t++){var l=Spicetify.Player.getProgressPercent()*e.track.duration;if(console.log(n[t].start,l,n[t+1].start,t,a),l<=n[t+1].start&&n[t].start<=l||(t=function(e,t){let n=0,a=e.length-1;for(;n<=a;){var l=Math.floor((n+a)/2);if(t<=e[l].start+e[l].duration&&e[l].start<=t)return console.log(l),l;e[l].start+e[l].duration<t?n=l+1:a=l-1}return 0}(n,l),console.log(t)),1==o)break;Spicetify.Player.isPlaying()||await function(n,a){return new Promise(e=>{const t=()=>{n.removeEventListener(a,t),e("")};n.addEventListener(a,t)})}(Spicetify.Player,"onplaypause"),console.log("running ...");for(let e=0;e<12;e++){var r=u[e];r.style.transition=`all ${1e3*n[t].duration}ms`,r.style.height=70*n[t].pitches[e]+"%"}await function(t){return new Promise(e=>setTimeout(e,t))}(1e3*n[t].duration)}}Spicetify.Player.addEventListener("songchange",()=>{o=!(o=!0),e()}),Spicetify.Player.addEventListener("songchange",()=>{o=!(o=!0),e()}),e()},[]),g.default.createElement("div",{className:"vis_container"},g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null),g.default.createElement(v,null))}var P=s(f());return s=d,i(r({},"__esModule",{value:!0}),s)})();const render=()=>vis.default();